# 全自动短视频生成工具 (Video Generator)

这是一个基于 Python 的全自动短视频生成工具，支持通过可视化界面 (GUI) 快速生成带配音、字幕、背景音乐和动态效果的短视频。适用于制作口播类、解说类短视频，支持一键切换横屏/竖屏模式。

## ✨ 主要功能

*   **可视化操作界面**：提供 Windows 风格的 GUI 界面，操作简单直观。
*   **多平台适配**：
    *   **竖屏 (9:16)**：适配 抖音、TikTok、快手、视频号。
    *   **横屏 (16:9)**：适配 B站、YouTube、西瓜视频。
*   **智能素材处理**：
    *   自动从指定目录随机读取视频素材。
    *   智能缩放与裁切 (Smart Scale & Crop) 以适配目标分辨率。
    *   自动添加画面动态缩放效果 (Zoompan)，提升视觉丰富度。
*   **自动化音频处理**：
    *   **TTS 配音**：集成 Manbo TTS (及 Zhipu TTS 接口)，支持自定义语速。
    *   **背景音乐 (BGM)**：支持自动混音、侧链压缩 (Ducking) —— 人声出现时自动压低 BGM。
    *   **响度标准化**：输出音频符合 -14 LUFS 标准。
*   **字幕自动化**：
    *   根据文案自动生成 SRT/ASS 字幕。
    *   支持关键词高亮。
    *   根据横竖屏模式自动调整字幕位置。
*   **文案驱动**：支持读取 TXT 文案文件，自动识别标题（钩子文案）。

## 🛠️ 环境要求

1.  **操作系统**：Windows (推荐) / macOS / Linux
2.  **Python**：3.8 或更高版本
3.  **FFmpeg**：必须安装并添加到系统环境变量 PATH 中。
    *   [下载 FFmpeg](https://ffmpeg.org/download.html)
    *   验证安装：在终端输入 `ffmpeg -version`

## 📦 安装步骤

1.  克隆或下载本项目到本地。
2.  安装 Python 依赖库：
    ```bash
    pip install -r requirements.txt
    ```
    *(依赖包含: `python-dotenv`, `pydub`, `requests` 等)*

3.  **配置 API Key** (可选，如果使用在线 TTS)：
    *   在项目根目录创建 `.env` 文件。
    *   添加你的 API Key，例如：
        ```env
        ZHIPU_API_KEY=your_api_key_here
        ```
    *(本项目默认启用了 Manbo TTS，可能需要特定的网络环境或配置)*

## 🚀 快速开始

1.  **准备素材**：
    *   **视频**：将你的视频素材放入 `input/` 文件夹（或任意自定义文件夹）。
    *   **文案**：在 `文案/` 文件夹中创建 `.txt` 文件。
        *   文件名将作为视频开头的“钩子文案”（大标题）。
        *   文件内容为口播文案。
    *   **音乐**：准备一个 `.mp3` 文件作为背景音乐。

2.  **运行程序**：
    在终端中运行：
    ```bash
    python app.py
    ```

3.  **在界面中操作**：
    *   **选择比例**：根据发布平台选择“竖屏”或“横屏”。
    *   **调整语速**：默认为 1.2 倍速，可根据需要调整。
    *   **选择路径**：浏览并选择你的视频目录、文案目录和 BGM 文件。
    *   **点击生成**：点击“开始生成”按钮。

4.  **查看结果**：
    *   生成过程中可以在界面下方的日志窗口查看进度。
    *   完成后，最终视频将保存在 `output/final.mp4`。

## 📂 目录结构说明

```
jj/
├── app.py                  # [入口] 可视化界面程序
├── jj.py                   # [核心] 视频生成逻辑核心
├── requirements.txt        # Python 依赖列表
├── .env                    # 环境变量配置文件
├── assets/                 # 默认资源目录 (BGM等)
├── input/                  # 默认视频素材目录
├── 文案/                   # 默认文案目录
├── output/                 # 输出目录
│   ├── final.mp4           # 最终生成结果
│   └── _work/              # 中间临时文件 (可清理)
├── templates/
│   └── subtitle.ass.tpl    # 字幕样式模板
└── utils/                  # 工具模块 (TTS等)
```

## 📝 注意事项

*   请确保 **FFmpeg** 已正确安装，否则无法处理视频。
*   文案文件推荐使用 `UTF-8` 编码，以免出现乱码。
*   生成的中间文件在 `output/_work` 目录下，如果遇到生成错误，可以检查该目录下的临时文件进行排查。

## 📄 License

MIT License
